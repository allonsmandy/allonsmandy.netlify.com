---
title: WEBPACK
description: webpack + react
date: '2020-05-24 06:28:06'
image: assets/img/1_wLD6MrqQ6Q0N7QW0zT4aEg.jpeg
category: dev
background: '#b49bf1'
---
O QUE É O WEBPACK?

É um module bundler (um empacotador de modulos para aplicaçoes js). Gera bundler que será utilizado no html, em es5. Ou seja, o bundler é um arquivo final onde o webpack pega todos os modulos e empacota em um unico arquivo.

CONFIGURANDO O WEBPACK

Principais conceitos:

* Entry

utilizando grafo, o webpack precisa de um ponto de enrada para buscar todos os módulos e dependencias

* Output

é para determinar quais são os bundlers que o webpack irá emitir

* Loaders

é para pertmirir que o webpack gerencie arquivos não só javascript

* plugins

podem ser utilizados para otimizaçao de pacotes, minificaçao, injeçao de scripts e muito mais

* Mode

utilizados para abordagem de configuração zero. É possivel configurar módulos como production, development ou none

Production: trás otimizações internas

Development: É executado com três plugins: UglifyPlugin, ModuleConcatenationPlugin e NoEmitOnErrorsPlugin

CRIAÇAO DO ARQUIVO webpack.config.js

arquivo principal de inicializaçao do webpack

```javascript
const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: 'bundle.js'
  }
};
```

path: importaçao do path pra pega o diretorio raiz, coloquei o dirname e quero que gere uma pasta chamada dist, pode ser qualquer nome que voce desejar, mas por convençao voce geralemnte coloca dist ou build que é o arquivo final do projeto

filename: qual vai ser o nome do nosso bundle, pode ser qualquer nome, esse arquivo final que sera empacotado no sso projeto e enviado pra produçao

npm init -y

npm i -D webpack webpack-cli

"build": "webpack --mode production"

adicionando babel no nosso projeto

npm i @babel/core babel-loader @babel/preset-env @babel/preset-react --save-dev

* 2 instalaçao dos nossos plugins
* 3 pra gente poder utilizar o es6 es7 e compilar para um es5, eu nao preciso especificar a versao do ecma que queremos utilizar, posso utilizar 6 7 8 e fazer a transpialao dele pro es5 que o browser vai poder interpretar
* 4 pra o babel poder transpilar o react vamos utilziar esse preset

```javascript
module: {
  rules: [
    {
      test: /\.(js|jsx)$/,
      exclude: /node_modules/,
      use: {
        loader: "babel-loader"
      }
    }
  ]
}
```

eu vou colocar em modules o que ele vai interpretar, vou excluir node modules e qual loader o webpack vai utilizar pra poder fazer essa transpilaçao, pra poder interpretar os arquivos do js

index.js

```javascript
import React from "react";
import ReactDOM from "react-dom";
import App from "./App";
ReactDOM.render(<App />, document.getElementById("app"));
```

index.html

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>webpack 4 + babel</title> 
  </head>
  
  <body>
    <div id="app"></div>
  </body>
  
</html>
```

App.js

```javascript
import React from "react"
const App = () => {
  return (
    <div>
      <p>Amanda</p>
    </div>
  );
};
export default App;
```

como a gente instalou o preset env do react tbm, pra funcionar no webpack eu vou precisar criar o .babelrc e adicionar o preset env do papel, tbm foi adicionar em seguida o preset do react e fazer a instaçao do react e react dom

npm i react react-dom

npm i -D babel-preset-react

```javascript
{
  "presets": [
    "@babel/preset-env",
    "@babel/preset-react"
  ]
}
```

esse arquivo babelrc é o arquivo padrão onde o babel vai ler todos os presets e plugins que estejam aqui dento, nestre caso foi add só os presets pois n tamo utilizando plugins



VAMOS VER ISSO FUNCIONANDO?

lembra que no scripts do package.json tem aquele build?

vou add um modo de desenvolvimento tbm!

"dev": "webpack --mode development"

É possivel fazer essas configuraçoes dentro do webpack tambem o modo que ele execute. Da pra criar varios arquivos do webpack, ou seja, da ate pra fazer um merge de arquivos. Por exemplo, eu posso criar uma config de desenvolvimento e outra de produçao, onde a de produçao vai pegar o de desenvolvimento e add alguns parametros a mais.

```javascript
mode: "production"
```

npm run dev

NOSSO PLUGIN HTML + CONFIG FINAL

```javascript
const path = require('path');
const HtmlWebPackPlugin = require("html-webpack-plugin");

module.exports = {
  entry: './src/index.js',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: 'bundle.js'
  },
  module: {
    rules: [
      {
        test: /\.(js|jsx)$/,
        exclude: /node_modules/,
        use: {
          loader: "babel-loader"
        }
      }
    ]
  },
  plugins: [
    new HtmlWebPackPlugin({
      template: "./src/index.html",
      filename: "./index.html"
    })
  ]
};
```

é possivel gerar um build ai ele conseguiu gerar o arquivo final com sucesso

CRIANDO UM DEV SERVER

npm i -D webpack-dev-server

```javascript
"scripts": {
  "start:dev": "webpack-dev-server"
}
```

a gente nao vai precisar criar um servidor para nosso projeto, ele vem com rotreload, sempre que tiver uma alteraçao no projeto ele ja vai atualizar a pagina automaticamente

npm run start:dev
